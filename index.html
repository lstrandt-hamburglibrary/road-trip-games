<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road Trip Games - Your Ultimate Travel Companion</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6b35">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Road Trip">

    <!-- Prevent service worker caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- App Version for automatic updates -->
    <script>window.APP_VERSION = '1.75.3';</script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .content {
            padding: 2rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .feature-card p {
            opacity: 0.9;
        }

        .welcome {
            text-align: center;
            padding: 2rem;
        }

        .welcome h2 {
            color: #333;
            margin-bottom: 1rem;
        }

        .welcome p {
            color: #666;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4caf50;
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            pointer-events: auto;
        }

        .pull-to-refresh {
            position: fixed;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: top 0.3s ease;
            z-index: 9999;
        }

        .pull-to-refresh.visible {
            top: 20px;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #ff6b35;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .roadmap {
            margin-top: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .roadmap h2 {
            color: #333;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .roadmap-section {
            margin-bottom: 2rem;
        }

        .roadmap-section h3 {
            color: #ff6b35;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .roadmap-list {
            list-style: none;
            padding: 0;
        }

        .roadmap-list li {
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .roadmap-list li.completed {
            border-left-color: #28a745;
            opacity: 0.7;
        }

        .roadmap-list li.in-progress {
            border-left-color: #f7931e;
            font-weight: bold;
        }

        .status-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            margin-left: auto;
            font-weight: bold;
        }

        .status-badge.completed {
            background: #28a745;
            color: white;
        }

        .status-badge.in-progress {
            background: #f7931e;
            color: white;
        }

        .status-badge.planned {
            background: #6c757d;
            color: white;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 1rem;
            }

            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="updateToast" class="toast"></div>
    <div id="pullToRefresh" class="pull-to-refresh">
        <div class="spinner"></div>
    </div>
    <div class="app-container">
        <div class="header">
            <h1>üöó Road Trip Games</h1>
            <p>Your Ultimate Travel Companion</p>
        </div>

        <div class="content">
            <div class="welcome">
                <h2>Welcome to Road Trip Games!</h2>
                <p>The all-in-one app for making your road trips more fun and memorable. Track license plates, play games, and learn interesting facts along the way!</p>
            </div>

            <div class="feature-grid">
                <div class="feature-card" onclick="showLicensePlateTracker()">
                    <h3>üöô License Plates</h3>
                    <p>Track all the state plates you spot on your journey</p>
                </div>

                <div class="feature-card" onclick="showGamesMenu()">
                    <h3>üéÆ Games</h3>
                    <p>Play fun games to pass the time on long drives</p>
                </div>

                <div class="feature-card" onclick="alert('GPS Facts - Coming Soon!')">
                    <h3>üìç GPS Facts</h3>
                    <p>Learn interesting facts about places you're driving through</p>
                </div>

                <div class="feature-card" onclick="showTravelBingo()">
                    <h3>üéØ Travel Bingo</h3>
                    <p>Spot common road trip sights and win!</p>
                </div>
            </div>

            <!-- Travel Bingo Mode Selection -->
            <div id="bingoModeSelection" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>üéØ Travel Bingo</h2>
                    <button onclick="showHome()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem;">‚Üê Back to Home</button>
                </div>

                <div style="text-align: center; margin-bottom: 2rem;">
                    <h3 style="color: #333; margin-bottom: 1rem;">Choose Game Mode</h3>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; max-width: 600px; margin: 0 auto;">
                    <div onclick="startCompetitiveMode()" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">üèÅ Competitive</h3>
                        <p style="opacity: 0.9; margin-bottom: 0.5rem;">Same card, different colors</p>
                        <p style="opacity: 0.9;">Race to get 5 in a row first!</p>
                    </div>

                    <div onclick="startTeamMode()" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">ü§ù Team</h3>
                        <p style="opacity: 0.9; margin-bottom: 0.5rem;">Work together</p>
                        <p style="opacity: 0.9;">Get bingo as a team!</p>
                    </div>
                </div>
            </div>

            <!-- Travel Bingo Game Section (hidden by default) -->
            <div id="travelBingo" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 id="bingoTitle">üéØ Travel Bingo</h2>
                    <button onclick="backToModeSelection()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem;">‚Üê Back</button>
                </div>

                <!-- Player Selector for Competitive Mode -->
                <div id="bingoPlayerSelector" style="display: none; text-align: center; margin-bottom: 1rem;">
                    <p style="color: #666; margin-bottom: 0.5rem; font-size: 0.9rem;">I am:</p>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button id="selectPlayer1" onclick="selectPlayer(1)" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); min-width: 120px;">üîµ Player 1</button>
                        <button id="selectPlayer2" onclick="selectPlayer(2)" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); min-width: 120px; opacity: 0.5;">üî¥ Player 2</button>
                    </div>
                </div>

                <div id="bingoWinMessage" style="display: none; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; text-align: center; animation: pulse 1s infinite;">
                    <h2 style="font-size: 3rem; margin-bottom: 1rem;">üéâ BINGO! üéâ</h2>
                    <p id="bingoWinText" style="font-size: 1.5rem;">You got 5 in a row!</p>
                </div>

                <div style="max-width: 100%; margin: 0 auto; overflow: hidden;">
                    <div id="bingoGrid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.1rem; background: #667eea; padding: 0.1rem; border-radius: 6px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);"></div>

                    <div style="margin-top: 2rem; text-align: center;">
                        <button onclick="generateNewBingoCard()" style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">üîÑ New Card</button>
                        <button onclick="resetBingoCard()" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-left: 1rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">‚Ü∫ Clear Marks</button>
                    </div>

                    <div id="bingoInstructions" style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-top: 2rem;">
                        <h3 style="color: #333; margin-bottom: 1rem;">How to Play:</h3>
                        <ul style="color: #666; line-height: 1.8;">
                            <li>Tap a square when you spot that item on your road trip</li>
                            <li>Get 5 in a row (horizontal, vertical, or diagonal) to win!</li>
                            <li>The center square is a FREE space - already marked for you</li>
                            <li>Click "New Card" to generate a different set of items</li>
                            <li>Click "Clear Marks" to unmark all squares on current card</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- License Plate Tracker Section (hidden by default) -->
            <div id="plateTracker" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>üöô License Plate Tracker</h2>
                    <button onclick="showHome()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem;">‚Üê Back to Home</button>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <h3 style="font-size: 2rem; margin-bottom: 0.5rem;" id="plateProgress">0 / 64</h3>
                        <p style="font-size: 1.1rem;">Total Plates Collected</p>
                        <div style="background: white; height: 20px; border-radius: 10px; overflow: hidden; margin-top: 1rem;">
                            <div id="plateProgressBar" style="background: #28a745; height: 100%; width: 0%; transition: width 0.3s;"></div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid rgba(255,255,255,0.3);">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;" id="usProgress">0 / 51</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.25rem;">üá∫üá∏ United States</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;" id="canadaProgress">0 / 13</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.25rem;">üá®üá¶ Canada</div>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <!-- US States Section -->
                    <div>
                        <h3 style="color: #ff6b35; margin-bottom: 1rem; font-size: 1.5rem;">üá∫üá∏ United States</h3>
                        <div id="usStates"></div>
                    </div>

                    <!-- Canadian Provinces Section -->
                    <div>
                        <h3 style="color: #ff6b35; margin-bottom: 1rem; font-size: 1.5rem;">üá®üá¶ Canada</h3>
                        <div id="canadaProvinces"></div>
                    </div>
                </div>
            </div>

            <!-- Games Menu Section (hidden by default) -->
            <div id="gamesMenu" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>üéÆ Road Trip Games</h2>
                    <button onclick="showHome()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem;">‚Üê Back to Home</button>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="launchBattleship()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <h3>‚öì Battleship</h3>
                        <p>Pass-and-play naval combat game</p>
                    </div>

                    <div class="feature-card" onclick="launchConnectFour()" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <h3>üî¥ Connect 4</h3>
                        <p>Drop discs and connect four in a row</p>
                    </div>

                    <div class="feature-card" onclick="launchGuessWho()" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <h3>üïµÔ∏è Guess Who</h3>
                        <p>Figure out the mystery person</p>
                    </div>

                    <div class="feature-card" onclick="launchDotsAndBoxes()" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <h3>üì¶ Dots and Boxes</h3>
                        <p>Connect dots to capture boxes</p>
                    </div>

                    <div class="feature-card" onclick="launchTicTacToe()" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                        <h3>‚≠ï Tic Tac Toe</h3>
                        <p>Classic X's and O's strategy</p>
                    </div>

                    <div class="feature-card" onclick="launchTrash()" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                        <h3>üóëÔ∏è Trash</h3>
                        <p>Fast-paced card game</p>
                    </div>

                    <div class="feature-card" onclick="launchISpy()" style="background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);">
                        <h3>üëÄ I Spy</h3>
                        <p>Classic observation game</p>
                    </div>

                    <div class="feature-card" onclick="launchWouldYouRather()" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);">
                        <h3>ü§î Would You Rather</h3>
                        <p>Funny and tough choices</p>
                    </div>

                    <div class="feature-card" onclick="launchOthello()" style="background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);">
                        <h3>‚ö´ Othello</h3>
                        <p>Flip discs to dominate the board</p>
                    </div>

                    <div class="feature-card" onclick="launchMinesweeper()" style="background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);">
                        <h3>üí£ Minesweeper</h3>
                        <p>Clear the grid without hitting mines</p>
                    </div>

                    <div class="feature-card" onclick="launchWar()" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                        <h3>üé¥ War</h3>
                        <p>Classic card battle - highest card wins!</p>
                    </div>

                    <div class="feature-card" onclick="launchJoust()" style="background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%);">
                        <h3>ü¶§ Joust</h3>
                        <p>Ride your ostrich to defeat enemy riders!</p>
                    </div>

                    <div class="feature-card" onclick="launchTunnelRunner()" style="background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);">
                        <h3>üöÄ Tunnel Runner</h3>
                        <p>Fly your rocket through the tunnel!</p>
                    </div>

                    <div class="feature-card" onclick="launchDownhillSkier()" style="background: linear-gradient(135deg, #00b4d8 0%, #90e0ef 100%);">
                        <h3>‚õ∑Ô∏è Downhill Skier</h3>
                        <p>Ski down the mountain avoiding trees!</p>
                    </div>

                    <div class="feature-card" onclick="launchPacman()" style="background: linear-gradient(135deg, #FFFF00 0%, #FFD700 100%); color: #000;">
                        <h3>üü° Pac-Man</h3>
                        <p>Eat dots and avoid ghosts in the maze!</p>
                    </div>

                    <div class="feature-card" onclick="launchGalaxian()" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);">
                        <h3>üöÄ Galaxian</h3>
                        <p>Classic 1979 space shooter arcade game!</p>
                    </div>

                    <div class="feature-card" onclick="launchGalaga()" style="background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);">
                        <h3>üëæ Galaga</h3>
                        <p>1981 sequel with tractor beam & dual fighters!</p>
                    </div>

                    <div class="feature-card" onclick="launchCentipede()" style="background: linear-gradient(135deg, #00ff00 0%, #00aa00 100%);">
                        <h3>üêõ Centipede</h3>
                        <p>Classic 1980 Atari arcade shooter!</p>
                    </div>

                    <div class="feature-card" onclick="launchAsteroids()" style="background: linear-gradient(135deg, #1a1a2e 0%, #4a4e69 100%);">
                        <h3>üöÄ Asteroids</h3>
                        <p>Classic 1979 vector arcade game!</p>
                    </div>

                    <div class="feature-card" onclick="launchQix()" style="background: linear-gradient(135deg, #0066cc 0%, #00ccff 100%);">
                        <h3>üé® Qix</h3>
                        <p>Classic 1981 drawing puzzle game!</p>
                    </div>

                    <div class="feature-card" onclick="launchKlax()" style="background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);">
                        <h3>üéØ Klax</h3>
                        <p>Classic 1990 tile-matching puzzle game!</p>
                    </div>
                </div>
            </div>

            <!-- Pac-Man Game Section (hidden by default) -->
            <div id="pacmanGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitPacman()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üü° Pac-Man</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center;">
                    <canvas id="pacmanCanvas"></canvas>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="pacmanControls" style="display: flex; justify-content: flex-end; align-items: center; margin-top: 2rem; padding: 0 1rem;">
                    <div style="display: grid; grid-template-columns: repeat(3, 80px); grid-template-rows: repeat(3, 80px); gap: 8px;">
                        <div style="grid-column: 2;"></div>
                        <button id="btnUp" style="grid-column: 2; width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚ñ≤</button>
                        <div></div>

                        <button id="btnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚óÄ</button>
                        <div></div>
                        <button id="btnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚ñ∂</button>

                        <div></div>
                        <button id="btnDown" style="grid-column: 2; width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚ñº</button>
                        <div></div>
                    </div>
                </div>
            </div>

            <!-- Battleship Game Section (hidden by default) -->
            <div id="battleshipGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitBattleship()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">‚öì Battleship</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="battleshipContent"></div>
            </div>

            <div id="connect4Game" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitConnect4()" style="width: 50px; height: 50px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border: none; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">‚Üê</button>
                    <h2 style="margin: 0;">üî¥ Connect 4</h2>
                    <div style="width: 50px;"></div>
                </div>
                <div id="connect4Content"></div>
            </div>

            <div id="minesweeperGame" style="display: none; margin: -2rem; padding: 0.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 0.5rem;">
                    <button onclick="exitMinesweeper()" style="background: #e74c3c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer; font-size: 0.9rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üí£ Minesweeper</h2>
                    <div style="width: 100px;"></div>
                </div>
                <div id="minesweeperContent"></div>
            </div>

            <div id="warGame" style="display: none;">
                <div id="warContent"></div>
            </div>

            <!-- Trash Game Section (hidden by default) -->
            <div id="trashGame" style="display: none;">
                <div id="trashContent"></div>
            </div>

            <!-- Othello Game Section (hidden by default) -->
            <div id="othelloGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitOthelloToMenu()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">‚ö´ Othello</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="othelloContent"></div>
            </div>

            <!-- Would You Rather Game Section (hidden by default) -->
            <div id="wouldYouRatherGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitWouldYouRatherToMenu()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">ü§î Would You Rather</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="wouldYouRatherContent"></div>
            </div>

            <!-- Dots and Boxes Game Section (hidden by default) -->
            <div id="dotsAndBoxesGame" style="display: none;">
                <div id="dotsAndBoxesContent"></div>
            </div>

            <!-- Guess Who Game Section (hidden by default) -->
            <div id="guessWhoGame" style="display: none;">
                <div id="guessWhoContent"></div>
            </div>

            <!-- Joust Game Section (hidden by default) -->
            <div id="joustGame" style="display: none;">
                <div id="joustContent"></div>
            </div>

            <!-- Tunnel Runner Game Section (hidden by default) -->
            <div id="tunnelRunnerGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitTunnelRunnerToMenu()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üöÄ Tunnel Runner</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="tunnelRunnerContent"></div>
            </div>

            <!-- Downhill Skier Game Section (hidden by default) -->
            <div id="downhillSkierGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitDownhillSkierToMenu()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">‚õ∑Ô∏è Downhill Skier</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="downhillSkierContent"></div>
            </div>

            <!-- Galaxian Game Section (hidden by default) -->
            <div id="galaxianGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitGalaxian()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üöÄ Galaxian</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center; max-width: 100%; overflow: hidden;">
                    <canvas id="galaxianCanvas" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"></canvas>
                    <div style="margin-top: 1rem; color: #666; font-size: 0.9rem;">
                        <p><strong>Arrow Keys / A-D</strong> to move | <strong>Space</strong> to shoot</p>
                        <p style="margin-top: 0.5rem;">üí° Diving enemies are worth 2x points!</p>
                    </div>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="galaxianControls" style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: 2rem; padding: 0 1rem;">
                    <button id="galaxianBtnFire" style="width: 90px; height: 90px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; touch-action: manipulation; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">FIRE</button>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="galaxianBtnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚óÄ</button>
                        <button id="galaxianBtnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚ñ∂</button>
                    </div>
                </div>
            </div>

            <!-- Galaga Game Section (hidden by default) -->
            <div id="galagaGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitGalaga()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üëæ Galaga</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center; max-width: 100%; overflow: hidden;">
                    <canvas id="galagaCanvas" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"></canvas>
                    <div style="margin-top: 1rem; color: #666; font-size: 0.9rem;">
                        <p><strong>Arrow Keys / A-D</strong> to move | <strong>Space</strong> to shoot (auto-fire!)</p>
                        <p style="margin-top: 0.5rem;">‚ú® <strong>Boss Galaga</strong> can capture your ship - rescue it for <strong>Dual Fighter</strong> mode!</p>
                        <p style="margin-top: 0.25rem;">üéØ Every 3rd stage is a <strong>Challenge Stage</strong></p>
                    </div>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="galagaControls" style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: 2rem; padding: 0 1rem;">
                    <button id="galagaBtnFire" style="width: 90px; height: 90px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; touch-action: manipulation; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">FIRE</button>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="galagaBtnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚óÄ</button>
                        <button id="galagaBtnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">‚ñ∂</button>
                    </div>
                </div>
            </div>

            <!-- Centipede Game Section (hidden by default) -->
            <div id="centipedeGame" style="display: none;">
                <div id="centipedeContent"></div>
            </div>

            <!-- Asteroids Game Section (hidden by default) -->
            <div id="asteroidsGame" style="display: none;">
                <div id="asteroidsContent"></div>
            </div>

            <!-- Qix Game Section (hidden by default) -->
            <div id="qixGame" style="display: none;">
                <div id="qixContent"></div>
            </div>

            <!-- Klax Game Section (hidden by default) -->
            <div id="klaxGame" style="display: none;">
                <div id="klaxContent"></div>
            </div>

            <!-- Pharaoh's Curse Game Section (hidden by default) -->
            <div id="pharaohGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitPharaohToMenu()" style="background: #e74c3c; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">‚Üê Back</button>
                    <h2 style="margin: 0;">üëë Pharaoh's Curse</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="pharaohContent"></div>
            </div>

            <div class="roadmap">
                <h2>üó∫Ô∏è Development Roadmap</h2>

                <div class="roadmap-section">
                    <h3>‚úÖ Completed</h3>
                    <ul class="roadmap-list">
                        <li class="completed">
                            <span>üöÄ Initial PWA setup with offline support</span>
                            <span class="status-badge completed">Done</span>
                        </li>
                        <li class="completed">
                            <span>üì± Mobile-responsive design</span>
                            <span class="status-badge completed">Done</span>
                        </li>
                        <li class="completed">
                            <span>üöô License Plate Tracker - All 51 US states/DC + 13 Canadian provinces</span>
                            <span class="status-badge completed">Done</span>
                        </li>
                    </ul>
                </div>

                <div class="roadmap-section">
                    <h3>üéØ Up Next</h3>
                    <ul class="roadmap-list">
                        <li class="planned">
                            <span>üéÆ Classic Road Trip Games (I Spy, Would You Rather)</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                    </ul>
                </div>

                <div class="roadmap-section">
                    <h3>üí° Future Features</h3>
                    <ul class="roadmap-list">
                        <li class="planned">
                            <span>üéØ Travel Bingo (Spot cows, water towers, bridges, etc.)</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                        <li class="planned">
                            <span>üìç GPS-Based Location Facts</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                        <li class="planned">
                            <span>üìä Trip Statistics & Mileage Tracker</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                        <li class="planned">
                            <span>üì∏ Trip Photo Journal</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                        <li class="planned">
                            <span>üó∫Ô∏è Interactive Trip Map</span>
                            <span class="status-badge planned">Planned</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // License plate data with abbreviations
        const US_STATES = [
            { name: 'Alabama', abbr: 'AL' },
            { name: 'Alaska', abbr: 'AK' },
            { name: 'Arizona', abbr: 'AZ' },
            { name: 'Arkansas', abbr: 'AR' },
            { name: 'California', abbr: 'CA' },
            { name: 'Colorado', abbr: 'CO' },
            { name: 'Connecticut', abbr: 'CT' },
            { name: 'Delaware', abbr: 'DE' },
            { name: 'District of Columbia', abbr: 'DC' },
            { name: 'Florida', abbr: 'FL' },
            { name: 'Georgia', abbr: 'GA' },
            { name: 'Hawaii', abbr: 'HI' },
            { name: 'Idaho', abbr: 'ID' },
            { name: 'Illinois', abbr: 'IL' },
            { name: 'Indiana', abbr: 'IN' },
            { name: 'Iowa', abbr: 'IA' },
            { name: 'Kansas', abbr: 'KS' },
            { name: 'Kentucky', abbr: 'KY' },
            { name: 'Louisiana', abbr: 'LA' },
            { name: 'Maine', abbr: 'ME' },
            { name: 'Maryland', abbr: 'MD' },
            { name: 'Massachusetts', abbr: 'MA' },
            { name: 'Michigan', abbr: 'MI' },
            { name: 'Minnesota', abbr: 'MN' },
            { name: 'Mississippi', abbr: 'MS' },
            { name: 'Missouri', abbr: 'MO' },
            { name: 'Montana', abbr: 'MT' },
            { name: 'Nebraska', abbr: 'NE' },
            { name: 'Nevada', abbr: 'NV' },
            { name: 'New Hampshire', abbr: 'NH' },
            { name: 'New Jersey', abbr: 'NJ' },
            { name: 'New Mexico', abbr: 'NM' },
            { name: 'New York', abbr: 'NY' },
            { name: 'North Carolina', abbr: 'NC' },
            { name: 'North Dakota', abbr: 'ND' },
            { name: 'Ohio', abbr: 'OH' },
            { name: 'Oklahoma', abbr: 'OK' },
            { name: 'Oregon', abbr: 'OR' },
            { name: 'Pennsylvania', abbr: 'PA' },
            { name: 'Rhode Island', abbr: 'RI' },
            { name: 'South Carolina', abbr: 'SC' },
            { name: 'South Dakota', abbr: 'SD' },
            { name: 'Tennessee', abbr: 'TN' },
            { name: 'Texas', abbr: 'TX' },
            { name: 'Utah', abbr: 'UT' },
            { name: 'Vermont', abbr: 'VT' },
            { name: 'Virginia', abbr: 'VA' },
            { name: 'Washington', abbr: 'WA' },
            { name: 'West Virginia', abbr: 'WV' },
            { name: 'Wisconsin', abbr: 'WI' },
            { name: 'Wyoming', abbr: 'WY' }
        ];

        const CANADA_PROVINCES = [
            { name: 'Alberta', abbr: 'AB' },
            { name: 'British Columbia', abbr: 'BC' },
            { name: 'Manitoba', abbr: 'MB' },
            { name: 'New Brunswick', abbr: 'NB' },
            { name: 'Newfoundland and Labrador', abbr: 'NL' },
            { name: 'Northwest Territories', abbr: 'NT' },
            { name: 'Nova Scotia', abbr: 'NS' },
            { name: 'Nunavut', abbr: 'NU' },
            { name: 'Ontario', abbr: 'ON' },
            { name: 'Prince Edward Island', abbr: 'PE' },
            { name: 'Quebec', abbr: 'QC' },
            { name: 'Saskatchewan', abbr: 'SK' },
            { name: 'Yukon', abbr: 'YT' }
        ];

        // Generate license plate SVG
        function createPlateSVG(abbr, isChecked) {
            return `
                <svg width="100" height="50" viewBox="0 0 100 50" style="border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                    <rect width="100" height="50" rx="4" fill="${isChecked ? '#28a745' : '#4a90e2'}"/>
                    <rect x="2" y="2" width="96" height="46" rx="3" fill="white"/>
                    <text x="50" y="32" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="${isChecked ? '#28a745' : '#333'}">${abbr}</text>
                </svg>
            `;
        }

        // Load saved progress from localStorage
        let collectedPlates = JSON.parse(localStorage.getItem('collectedPlates') || '{}');

        function showHome() {
            document.querySelector('.welcome').style.display = 'block';
            document.querySelector('.feature-grid').style.display = 'grid';
            document.querySelector('.roadmap').style.display = 'block';
            document.getElementById('plateTracker').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('gamesMenu').style.display = 'none';
        }

        function showGamesMenu() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.querySelector('.roadmap').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            document.getElementById('dotsAndBoxesGame').style.display = 'none';
            document.getElementById('guessWhoGame').style.display = 'none';
            document.getElementById('gamesMenu').style.display = 'block';
        }

        function showLicensePlateTracker() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.querySelector('.roadmap').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'block';
            loadPlateTracker();
        }

        function loadPlateTracker() {
            // Render US States
            const usContainer = document.getElementById('usStates');
            usContainer.innerHTML = US_STATES.map(state => {
                const isChecked = collectedPlates[state.name] || false;
                return `
                    <label style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: ${isChecked ? '#d4edda' : 'white'}; margin-bottom: 0.75rem; border-radius: 10px; cursor: pointer; border: 2px solid ${isChecked ? '#28a745' : '#e9ecef'}; transition: all 0.2s;">
                        <input type="checkbox" ${isChecked ? 'checked' : ''} onchange="togglePlate('${state.name}')" style="width: 24px; height: 24px; cursor: pointer;">
                        <div style="flex-shrink: 0;">
                            ${createPlateSVG(state.abbr, isChecked)}
                        </div>
                        <span style="font-size: 1.1rem; font-weight: ${isChecked ? 'bold' : 'normal'}; color: ${isChecked ? '#155724' : '#333'};">${state.name}</span>
                        ${isChecked ? '<span style="margin-left: auto; color: #28a745; font-size: 1.5rem;">‚úì</span>' : ''}
                    </label>
                `;
            }).join('');

            // Render Canadian Provinces
            const canadaContainer = document.getElementById('canadaProvinces');
            canadaContainer.innerHTML = CANADA_PROVINCES.map(province => {
                const isChecked = collectedPlates[province.name] || false;
                return `
                    <label style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: ${isChecked ? '#d4edda' : 'white'}; margin-bottom: 0.75rem; border-radius: 10px; cursor: pointer; border: 2px solid ${isChecked ? '#28a745' : '#e9ecef'}; transition: all 0.2s;">
                        <input type="checkbox" ${isChecked ? 'checked' : ''} onchange="togglePlate('${province.name}')" style="width: 24px; height: 24px; cursor: pointer;">
                        <div style="flex-shrink: 0;">
                            ${createPlateSVG(province.abbr, isChecked)}
                        </div>
                        <span style="font-size: 1.1rem; font-weight: ${isChecked ? 'bold' : 'normal'}; color: ${isChecked ? '#155724' : '#333'};">${province.name}</span>
                        ${isChecked ? '<span style="margin-left: auto; color: #28a745; font-size: 1.5rem;">‚úì</span>' : ''}
                    </label>
                `;
            }).join('');

            updateProgress();
        }

        function togglePlate(name) {
            collectedPlates[name] = !collectedPlates[name];
            if (!collectedPlates[name]) {
                delete collectedPlates[name];
            }
            localStorage.setItem('collectedPlates', JSON.stringify(collectedPlates));
            loadPlateTracker();
        }

        function updateProgress() {
            // Calculate US states collected
            const usCollected = US_STATES.filter(s => collectedPlates[s.name]).length;
            const usTotal = US_STATES.length;

            // Calculate Canada provinces collected
            const canadaCollected = CANADA_PROVINCES.filter(p => collectedPlates[p.name]).length;
            const canadaTotal = CANADA_PROVINCES.length;

            // Calculate total
            const total = usTotal + canadaTotal;
            const collected = usCollected + canadaCollected;
            const percentage = (collected / total * 100).toFixed(1);

            // Update displays
            document.getElementById('plateProgress').textContent = `${collected} / ${total}`;
            document.getElementById('plateProgressBar').style.width = `${percentage}%`;
            document.getElementById('usProgress').textContent = `${usCollected} / ${usTotal}`;
            document.getElementById('canadaProgress').textContent = `${canadaCollected} / ${canadaTotal}`;
        }

        // Travel Bingo functionality
        const BINGO_ITEMS = [
            'üêÑ Cow', 'üóº Water Tower', 'üåâ Bridge', 'üìª Billboard', '‚õΩ Gas Station',
            'üèçÔ∏è Motorcycle', 'üöõ Semi Truck', 'üõë Stop Sign', 'üöî Police Car', 'üü° Yellow Car',
            '‚õ™ Church', 'üèöÔ∏è Barn', 'üåæ Silo', 'ü™¶ Cemetery', 'üöå School Bus',
            '‚ö†Ô∏è Speed Limit Sign', 'üöÇ Train', 'üèûÔ∏è Lake/Pond', '‚õ∞Ô∏è Mountains', 'üê¶ Birds on Wire',
            'üèñÔ∏è Playground', 'üçî Fast Food', 'üå¨Ô∏è Windmill', 'üõ£Ô∏è Exit Sign', 'üöú Tractor',
            'üè™ Convenience Store', 'ü¶å Deer Crossing Sign', 'üå≥ Tree Grove', 'üè≠ Factory', '‚õ≤ Fountain',
            'üöÅ Helicopter', 'üè´ School', 'üè• Hospital', 'üè® Hotel', 'üåª Sunflowers',
            'üêë Sheep', 'üçé Fruit Stand', 'üÖøÔ∏è Rest Stop', 'ü¶Ö Flock of Birds', '‚öñÔ∏è Weigh Station', 'üìö Library Sign',
            'üöß Construction Cone', 'üè¥ Flagpole', 'üåµ Cactus', 'üöë Ambulance', 'üêÑüö∏ Cattle Crossing', '‚Ü©Ô∏è Detour Sign',
            'üéà Hot Air Balloon', '‚ö° Lightning', 'üåà Rainbow'
        ];

        let bingoCard = [];
        let markedSquares = [];  // For team mode: boolean array
        let player1Marks = [];    // For competitive mode
        let player2Marks = [];    // For competitive mode
        let currentPlayer = 1;    // For competitive mode
        let bingoGameMode = 'team';  // 'team' or 'competitive'

        function showTravelBingo() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.querySelector('.roadmap').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            document.getElementById('gamesMenu').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('bingoModeSelection').style.display = 'block';
        }

        function backToModeSelection() {
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('bingoModeSelection').style.display = 'block';
        }

        function startCompetitiveMode() {
            bingoGameMode = 'competitive';
            document.getElementById('bingoModeSelection').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'block';
            document.getElementById('bingoTitle').textContent = 'üèÅ Competitive Bingo';
            document.getElementById('bingoPlayerSelector').style.display = 'block';
            document.getElementById('bingoInstructions').innerHTML = `
                <h3 style="color: #333; margin-bottom: 1rem;">How to Play:</h3>
                <ul style="color: #666; line-height: 1.8;">
                    <li>Select your player number above before marking squares</li>
                    <li>When you spot an item, click it to mark it with your checkmark</li>
                    <li>Player 1: BLUE ‚úì in upper right corner</li>
                    <li>Player 2: RED ‚úì in upper left corner</li>
                    <li>Both can mark the same square - both checkmarks will show</li>
                    <li>First player to get 5 in a row with their color wins!</li>
                    <li>The center square is a FREE space for both players</li>
                </ul>
            `;

            // Load saved competitive game or generate new one
            const savedCard = localStorage.getItem('bingoCard_competitive');
            const savedP1 = localStorage.getItem('player1Marks');
            const savedP2 = localStorage.getItem('player2Marks');
            const savedCurrent = localStorage.getItem('currentPlayer');

            if (savedCard) {
                bingoCard = JSON.parse(savedCard);
                player1Marks = savedP1 ? JSON.parse(savedP1) : Array(25).fill(false);
                player2Marks = savedP2 ? JSON.parse(savedP2) : Array(25).fill(false);
                player1Marks[12] = true;  // Center FREE for both
                player2Marks[12] = true;
                currentPlayer = savedCurrent ? parseInt(savedCurrent) : 1;
            } else {
                generateNewBingoCard();
            }

            updatePlayerSelector();
            renderBingoCard();
        }

        function startTeamMode() {
            bingoGameMode = 'team';
            document.getElementById('bingoModeSelection').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'block';
            document.getElementById('bingoTitle').textContent = 'ü§ù Team Bingo';
            document.getElementById('bingoPlayerSelector').style.display = 'none';
            document.getElementById('bingoInstructions').innerHTML = `
                <h3 style="color: #333; margin-bottom: 1rem;">How to Play:</h3>
                <ul style="color: #666; line-height: 1.8;">
                    <li>Work together to spot items on your road trip</li>
                    <li>Anyone can mark any square when you see it</li>
                    <li>Get 5 in a row together to win as a team!</li>
                    <li>The center square is a FREE space - already marked for you</li>
                </ul>
            `;

            // Load saved team game or generate new one
            const savedCard = localStorage.getItem('bingoCard_team');
            const savedMarks = localStorage.getItem('bingoMarks_team');

            if (savedCard) {
                bingoCard = JSON.parse(savedCard);
                markedSquares = savedMarks ? JSON.parse(savedMarks) : Array(25).fill(false);
                markedSquares[12] = true;  // Center is FREE
            } else {
                generateNewBingoCard();
            }

            renderBingoCard();
        }

        function selectPlayer(playerNum) {
            currentPlayer = playerNum;
            localStorage.setItem('currentPlayer', currentPlayer);
            updatePlayerSelector();
        }

        function updatePlayerSelector() {
            const btn1 = document.getElementById('selectPlayer1');
            const btn2 = document.getElementById('selectPlayer2');

            if (currentPlayer === 1) {
                btn1.style.opacity = '1';
                btn1.style.transform = 'scale(1.05)';
                btn2.style.opacity = '0.5';
                btn2.style.transform = 'scale(1)';
            } else {
                btn1.style.opacity = '0.5';
                btn1.style.transform = 'scale(1)';
                btn2.style.opacity = '1';
                btn2.style.transform = 'scale(1.05)';
            }
        }

        function generateNewBingoCard() {
            // Shuffle and pick 24 random items (center will be FREE)
            const shuffled = [...BINGO_ITEMS].sort(() => Math.random() - 0.5);
            bingoCard = shuffled.slice(0, 24);
            // Insert FREE space in the middle (index 12)
            bingoCard.splice(12, 0, '‚≠ê FREE');

            if (bingoGameMode === 'competitive') {
                player1Marks = Array(25).fill(false);
                player2Marks = Array(25).fill(false);
                player1Marks[12] = true;  // Center is FREE for both
                player2Marks[12] = true;
                currentPlayer = 1;

                localStorage.setItem('bingoCard_competitive', JSON.stringify(bingoCard));
                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
                localStorage.setItem('currentPlayer', currentPlayer);
                updatePlayerSelector();
            } else {
                markedSquares = Array(25).fill(false);
                markedSquares[12] = true;  // Center is FREE

                localStorage.setItem('bingoCard_team', JSON.stringify(bingoCard));
                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            document.getElementById('bingoWinMessage').style.display = 'none';
            renderBingoCard();
        }

        function resetBingoCard() {
            if (bingoGameMode === 'competitive') {
                player1Marks = Array(25).fill(false);
                player2Marks = Array(25).fill(false);
                player1Marks[12] = true;
                player2Marks[12] = true;
                currentPlayer = 1;

                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
                localStorage.setItem('currentPlayer', currentPlayer);
                updatePlayerSelector();
            } else {
                markedSquares = Array(25).fill(false);
                markedSquares[12] = true;

                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            document.getElementById('bingoWinMessage').style.display = 'none';
            renderBingoCard();
        }

        function toggleBingoSquare(index) {
            // Can't toggle FREE space
            if (index === 12) return;

            if (bingoGameMode === 'competitive') {
                // In competitive mode, mark for selected player
                if (currentPlayer === 1) {
                    player1Marks[index] = !player1Marks[index];
                } else {
                    player2Marks[index] = !player2Marks[index];
                }

                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
            } else {
                // Team mode
                markedSquares[index] = !markedSquares[index];
                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            renderBingoCard();
            checkForBingo();
        }

        function renderBingoCard() {
            const grid = document.getElementById('bingoGrid');
            grid.innerHTML = bingoCard.map((item, index) => {
                const isFree = index === 12;
                let isMarked, bgColor, textColor;

                if (bingoGameMode === 'competitive') {
                    const p1Marked = player1Marks[index];
                    const p2Marked = player2Marks[index];

                    // Always white background in competitive mode
                    isMarked = p1Marked || p2Marked;
                    bgColor = 'white';
                    textColor = '#333';

                    // Generate checkmark overlays
                    let checkmarks = '';
                    if (p1Marked) {
                        // Blue checkmark in upper right
                        checkmarks += '<div style="position: absolute; top: 2px; right: 2px; color: #007bff; font-size: clamp(0.8rem, 2.5vw, 1.2rem); font-weight: bold; line-height: 1;">‚úì</div>';
                    }
                    if (p2Marked) {
                        // Red checkmark in upper left
                        checkmarks += '<div style="position: absolute; top: 2px; left: 2px; color: #e74c3c; font-size: clamp(0.8rem, 2.5vw, 1.2rem); font-weight: bold; line-height: 1;">‚úì</div>';
                    }

                    return `
                        <div
                            onclick="toggleBingoSquare(${index})"
                            style="
                                aspect-ratio: 1;
                                background: ${bgColor};
                                border-radius: 6px;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                justify-content: center;
                                cursor: ${isFree ? 'default' : 'pointer'};
                                transition: all 0.2s;
                                box-shadow: ${isMarked ? '0 4px 8px rgba(0, 0, 0, 0.4)' : '0 2px 4px rgba(0,0,0,0.1)'};
                                padding: 0.1rem;
                                text-align: center;
                                font-size: clamp(0.45rem, 1.5vw, 0.7rem);
                                color: ${textColor};
                                transform: ${isMarked ? 'scale(0.95)' : 'scale(1)'};
                                position: relative;
                            "
                            ${!isFree ? `onmouseover="if(!${isMarked}) this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(${isMarked ? '0.95' : '1'})'"` : ''}
                        >
                            ${checkmarks}
                            ${item}
                        </div>
                    `;
                } else {
                    // Team mode
                    isMarked = markedSquares[index];
                    bgColor = isMarked ? 'linear-gradient(135deg, #28a745 0%, #20c997 100%)' : 'white';
                    textColor = isMarked ? 'white' : '#333';

                    return `
                        <div
                            onclick="toggleBingoSquare(${index})"
                            style="
                                aspect-ratio: 1;
                                background: ${bgColor};
                                border-radius: 6px;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                justify-content: center;
                                cursor: ${isFree ? 'default' : 'pointer'};
                                transition: all 0.2s;
                                box-shadow: ${isMarked ? '0 4px 8px rgba(0, 0, 0, 0.4)' : '0 2px 4px rgba(0,0,0,0.1)'};
                                padding: 0.1rem;
                                text-align: center;
                                font-size: clamp(0.45rem, 1.5vw, 0.7rem);
                                font-weight: ${isMarked ? 'bold' : 'normal'};
                                color: ${textColor};
                                transform: ${isMarked ? 'scale(0.95)' : 'scale(1)'};
                            "
                            ${!isFree ? `onmouseover="if(!${isMarked}) this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(${isMarked ? '0.95' : '1'})'"` : ''}
                        >
                            ${item}
                        </div>
                    `;
                }
            }).join('');
        }

        function checkForBingo() {
            if (bingoGameMode === 'competitive') {
                // Check Player 1
                if (checkPlayerBingo(player1Marks)) {
                    showBingoWin(1);
                    return;
                }
                // Check Player 2
                if (checkPlayerBingo(player2Marks)) {
                    showBingoWin(2);
                    return;
                }
            } else {
                // Team mode
                if (checkPlayerBingo(markedSquares)) {
                    showBingoWin(0);  // 0 = team
                }
            }
        }

        function checkPlayerBingo(marks) {
            // Check rows
            for (let row = 0; row < 5; row++) {
                if (marks[row * 5] && marks[row * 5 + 1] && marks[row * 5 + 2] && marks[row * 5 + 3] && marks[row * 5 + 4]) {
                    return true;
                }
            }

            // Check columns
            for (let col = 0; col < 5; col++) {
                if (marks[col] && marks[col + 5] && marks[col + 10] && marks[col + 15] && marks[col + 20]) {
                    return true;
                }
            }

            // Check diagonals
            if (marks[0] && marks[6] && marks[12] && marks[18] && marks[24]) {
                return true;
            }
            if (marks[4] && marks[8] && marks[12] && marks[16] && marks[20]) {
                return true;
            }

            return false;
        }

        function showBingoWin(winner) {
            const winMsg = document.getElementById('bingoWinMessage');
            const winText = document.getElementById('bingoWinText');

            if (winner === 1) {
                winText.textContent = 'üîµ Player 1 Wins!';
                winMsg.style.background = 'linear-gradient(135deg, #007bff 0%, #0056b3 100%)';
            } else if (winner === 2) {
                winText.textContent = 'üî¥ Player 2 Wins!';
                winMsg.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100())';
            } else {
                winText.textContent = 'Team Bingo!';
                winMsg.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100())';
            }

            winMsg.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show toast notification
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('updateToast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // Pull to refresh functionality
        let pullStartY = 0;
        let pulling = false;

        document.addEventListener('touchstart', (e) => {
            if (window.scrollY === 0) {
                pullStartY = e.touches[0].clientY;
            }
        });

        document.addEventListener('touchmove', (e) => {
            if (window.scrollY === 0 && pullStartY > 0) {
                const pullDistance = e.touches[0].clientY - pullStartY;
                if (pullDistance > 50 && !pulling) {
                    pulling = true;
                    document.getElementById('pullToRefresh').classList.add('visible');
                }
            }
        });

        document.addEventListener('touchend', (e) => {
            if (pulling) {
                window.location.reload();
            }
            pulling = false;
            pullStartY = 0;
            setTimeout(() => {
                document.getElementById('pullToRefresh').classList.remove('visible');
            }, 300);
        });

        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => {
                        console.log('Service Worker registered');

                        // Check for updates every 10 seconds
                        setInterval(() => {
                            reg.update();
                        }, 10000);

                        // Check for updates immediately
                        reg.update();
                    })
                    .catch(err => console.log('Service Worker registration failed:', err));

                // Listen for update messages from service worker
                navigator.serviceWorker.addEventListener('message', event => {
                    if (event.data.type === 'UPDATE_AVAILABLE') {
                        showToast(`App updated to v${event.data.version}! Reloading...`);
                        // Auto-reload after 2 seconds
                        setTimeout(() => {
                            window.location.reload();
                        }, 2000);
                    }
                });
            });
        }
    </script>
    <script src="games/battleship.js?v=1.17.0"></script>
    <script src="games/connect4.js?v=1.31.2"></script>
    <script src="games/minesweeper.js?v=1.57.2"></script>
    <script src="games/war.js?v=1.17.0"></script>
    <script src="games/trash.js?v=1.17.0"></script>
    <script src="games/othello.js?v=1.19.0"></script>
    <script src="games/would-you-rather.js?v=1.21.1"></script>
    <script src="games/dots-and-boxes.js?v=1.28.3"></script>
    <script src="games/guess-who.js?v=1.31.1"></script>
    <script src="games/joust.js?v=1.32.0"></script>
    <script src="games/tunnel-runner.js?v=1.39.1"></script>
    <script src="games/downhill-skier.js?v=1.53.1"></script>
    <script src="games/pacman.js?v=1.50.1"></script>
    <script src="games/galaxian.js?v=1.56.1"></script>
    <script src="games/galaga.js?v=1.56.1"></script>
    <script src="games/centipede.js?v=1.62.0"></script>
    <script src="games/asteroids.js?v=1.68.0"></script>
    <script src="games/qix.js?v=1.69.0"></script>
    <script src="games/klax.js?v=1.70.0"></script>
    <script src="games/pharaoh.js?v=1.61.0"></script>
</body>
</html>
